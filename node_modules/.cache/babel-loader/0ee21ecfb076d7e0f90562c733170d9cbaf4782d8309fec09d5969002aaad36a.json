{"ast":null,"code":"const express = require('express');\nconst cors = require('cors');\nconst applescript = require('applescript');\nconst app = express();\napp.use(cors());\n\n// Endpoint to get current playing track\napp.get('/now-playing', (req, res) => {\n  // AppleScript to get Tidal track info\n  const script = `\n        if application \"TIDAL\" is running then\n            tell application \"System Events\"\n                tell process \"TIDAL\"\n                    try\n                        set windowTitle to name of window 1\n                        return windowTitle\n                    on error\n                        return \"No track playing\"\n                    end try\n                end tell\n            end tell\n        else\n            return \"TIDAL not running\"\n        end if\n    `;\n  applescript.execString(script, (err, result) => {\n    if (err || !result || result === \"TIDAL not running\" || result === \"No track playing\") {\n      res.json({\n        error: 'No track playing'\n      });\n      return;\n    }\n\n    // Parse the window title\n    // Tidal format on Mac is usually \"Track - Artist - TIDAL\"\n    const parts = result.split(' - ');\n    if (parts.length >= 2) {\n      res.json({\n        title: parts[0],\n        artist: parts[1],\n        isPlaying: true\n      });\n    } else {\n      res.json({\n        error: 'Could not parse track info'\n      });\n    }\n  });\n});\napp.listen(3001, () => {\n  console.log('Server running on http://localhost:3001');\n});","map":{"version":3,"names":["express","require","cors","applescript","app","use","get","req","res","script","execString","err","result","json","error","parts","split","length","title","artist","isPlaying","listen","console","log"],"sources":["/Users/seancurran/dev/tidal-tracker-as_react/src/components/mediaServices.js"],"sourcesContent":["const express = require('express');\nconst cors = require('cors');\nconst applescript = require('applescript');\nconst app = express();\n\napp.use(cors());\n\n// Endpoint to get current playing track\napp.get('/now-playing', (req, res) => {\n    // AppleScript to get Tidal track info\n    const script = `\n        if application \"TIDAL\" is running then\n            tell application \"System Events\"\n                tell process \"TIDAL\"\n                    try\n                        set windowTitle to name of window 1\n                        return windowTitle\n                    on error\n                        return \"No track playing\"\n                    end try\n                end tell\n            end tell\n        else\n            return \"TIDAL not running\"\n        end if\n    `;\n\n    applescript.execString(script, (err, result) => {\n        if (err || !result || result === \"TIDAL not running\" || result === \"No track playing\") {\n            res.json({ error: 'No track playing' });\n            return;\n        }\n\n        // Parse the window title\n        // Tidal format on Mac is usually \"Track - Artist - TIDAL\"\n        const parts = result.split(' - ');\n        if (parts.length >= 2) {\n            res.json({\n                title: parts[0],\n                artist: parts[1],\n                isPlaying: true\n            });\n        } else {\n            res.json({ error: 'Could not parse track info' });\n        }\n    });\n});\n\napp.listen(3001, () => {\n    console.log('Server running on http://localhost:3001');\n});"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,WAAW,GAAGF,OAAO,CAAC,aAAa,CAAC;AAC1C,MAAMG,GAAG,GAAGJ,OAAO,CAAC,CAAC;AAErBI,GAAG,CAACC,GAAG,CAACH,IAAI,CAAC,CAAC,CAAC;;AAEf;AACAE,GAAG,CAACE,GAAG,CAAC,cAAc,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EAClC;EACA,MAAMC,MAAM,GAAG;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;EAEDN,WAAW,CAACO,UAAU,CAACD,MAAM,EAAE,CAACE,GAAG,EAAEC,MAAM,KAAK;IAC5C,IAAID,GAAG,IAAI,CAACC,MAAM,IAAIA,MAAM,KAAK,mBAAmB,IAAIA,MAAM,KAAK,kBAAkB,EAAE;MACnFJ,GAAG,CAACK,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAmB,CAAC,CAAC;MACvC;IACJ;;IAEA;IACA;IACA,MAAMC,KAAK,GAAGH,MAAM,CAACI,KAAK,CAAC,KAAK,CAAC;IACjC,IAAID,KAAK,CAACE,MAAM,IAAI,CAAC,EAAE;MACnBT,GAAG,CAACK,IAAI,CAAC;QACLK,KAAK,EAAEH,KAAK,CAAC,CAAC,CAAC;QACfI,MAAM,EAAEJ,KAAK,CAAC,CAAC,CAAC;QAChBK,SAAS,EAAE;MACf,CAAC,CAAC;IACN,CAAC,MAAM;MACHZ,GAAG,CAACK,IAAI,CAAC;QAAEC,KAAK,EAAE;MAA6B,CAAC,CAAC;IACrD;EACJ,CAAC,CAAC;AACN,CAAC,CAAC;AAEFV,GAAG,CAACiB,MAAM,CAAC,IAAI,EAAE,MAAM;EACnBC,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;AAC1D,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}